<%- include('./includes/head.ejs') %>

    <link href="/main.css" rel="stylesheet" type="text/css">
    </head>

    <body>

        <%- include('./includes/navbar.ejs') %>

            <div class="container">
                <div class="btn">
                    <button>Generate quote</button>
                </div>
                <div class="content">
                    <div class="quote">

                        <div class="icon">
                            <svg stroke="currentColor" fill="#fff" stroke-width="0" version="1.1" viewBox="0 0 16 16"
                                height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3.516 7c1.933 0 3.5 1.567 3.5 3.5s-1.567 3.5-3.5 3.5-3.5-1.567-3.5-3.5l-0.016-0.5c0-3.866 3.134-7 7-7v2c-1.336 0-2.591 0.52-3.536 1.464-0.182 0.182-0.348 0.375-0.497 0.578 0.179-0.028 0.362-0.043 0.548-0.043zM12.516 7c1.933 0 3.5 1.567 3.5 3.5s-1.567 3.5-3.5 3.5-3.5-1.567-3.5-3.5l-0.016-0.5c0-3.866 3.134-7 7-7v2c-1.336 0-2.591 0.52-3.536 1.464-0.182 0.182-0.348 0.375-0.497 0.578 0.179-0.028 0.362-0.043 0.549-0.043z">
                                </path>
                            </svg>
                        </div>
                        <div class="data"></div>
                    </div>
                </div>
            </div>

            <script>
                let btn = document.querySelector(".container .btn button");
                let url = '/getQuote';
                
                async function callApi(url) {

                    const response = await fetch(url);

                    var data = await response.json();

                    if(data.quote != undefined)
                        document.querySelector('.content .quote .data').innerHTML = data.quote + '<div class="person">- ' + data.quotee + '</div>';
                    else
                    document.querySelector('.content .quote .data').innerHTML = 'There are no quotes in database please add them first.';
                }
                window.onload = () =>{
                    callApi(url);
                }

                btn.addEventListener('click', () => {
                    callApi(url);
                });
            </script>

            <%- include('./includes/end.ejs') %>